(function(){var t,e,r;r=require("request"),e=require("querystring"),t=function(){function t(t,e){this.credentials=t,this.shouldFormatResults=null!=e?e:!0,u=this.shouldFormatResults}var n,o,u;return u=null,o=function(t,e,n){var o;return o={callback:"/",consumer_key:e.consumer_key,consumer_secret:e.consumer_secret},r({url:t,json:!0,oauth:o},function(t,e,r){return t||200!==e.statusCode?void 0:n(r)})},n=function(t){var e,r,n,o,s;if(!u)return t;for(s=[],o=t.statuses,e=0,r=o.length;r>e;e++)n=o[e],s.push({date:n.created_at,body:n.text,location:{geo:n.geo,coordinates:n.coordinates,place:n.place},"retweet-count":n.retweet_count,"favorited-count":n.favorite_count,lang:n.lang});return s},t.prototype.byTopic=function(t,r){var u,s;return null==t&&(t=""),"string"==typeof t?s="q="+t+"&count=100":"object"==typeof t&&(s=e.stringify(t)),u="https://api.twitter.com/1.1/search/tweets.json?"+s,o(u,this.credentials,function(t){return r(n(t))})},t}(),module.exports=t}).call(this);