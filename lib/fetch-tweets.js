(function(){var t,e,r,n;n=require("request"),r=require("querystring"),e=require("./endpoints"),t=function(){function t(t,e){this.credentials=t,this.shouldFormatResults=null!=e?e:!0,s=this.shouldFormatResults}var o,u,s;return s=null,u=function(t,e,r){var o;return o={callback:"/",consumer_key:e.consumer_key,consumer_secret:e.consumer_secret},n({url:t,json:!0,oauth:o},function(t,e,n){return t||200!==e.statusCode?void 0:r(n)})},o=function(t){var e,r,n,o,u;if(!s)return t;for(u=[],o=t.statuses,e=0,r=o.length;r>e;e++)n=o[e],u.push({date:n.created_at,body:n.text,location:{geo:n.geo,coordinates:n.coordinates,place:n.place},"retweet-count":n.retweet_count,"favorited-count":n.favorite_count,lang:n.lang});return u},t.prototype.byTopic=function(t,n){var s,i;return null==t&&(t=""),"string"==typeof t?i="q="+t+"&limit=100":"object"==typeof t&&(i=r.stringify(t)),s=e.FETCH_TWEETS+"?"+i,u(s,this.credentials,function(t){return n(o(t))})},t}(),module.exports=t}).call(this);